{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/atian/Desktop/github-search/src/components/SearchPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { gql, useQuery } from \"@apollo/client\";\nimport List from \"./List\";\nimport SearchBar from \"./SearchBar\";\nimport ErrorHandler from \"./ErrorHandler\";\nconst GET_LIST = gql`\n  query($username: String! $cursor: String ) {\n    user( login: $username) {\n      repositories(first: 10, after: $cursor) {\n        totalCount\n        edges{\n          node {\n            ... on Repository {\n              name\n              url\n              description\n              updatedAt\n            }\n          }  \n        }\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n      }\n    }\n  }\n`;\n\nconst SearchPage = () => {\n  _s();\n\n  const [userName, setUserName] = useState(\"\");\n  const {\n    data,\n    fetchMore\n  } = useQuery(GET_LIST, {\n    variables: {\n      username: userName\n    }\n  });\n\n  const handleSearch = str => {\n    setUserName(str);\n    fetchMore({\n      variables: {\n        username: str\n      },\n      updateQuery: (prev, {\n        fetchMoreResult\n      }) => {\n        if (!fetchMoreResult) return prev;\n        return fetchMoreResult;\n      }\n    });\n  };\n\n  const handleMore = () => {\n    fetchMore({\n      variables: {\n        username: userName,\n        cursor: data.user.repositories.pageInfo.endCursor\n      },\n      updateQuery: (prev, {\n        fetchMoreResult\n      }) => {\n        if (!fetchMoreResult) return prev;\n        return fetchMoreResult;\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), data && /*#__PURE__*/_jsxDEV(List, {\n      data: data.user.repositories.edges,\n      total: data.user.repositories.totalCount,\n      user: userName,\n      more: handleMore,\n      hasNextPage: data.user.repositories.pageInfo.hasNextPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SearchPage, \"YMsTavpXvkMk2GKeOkPPgrVal2w=\", false, function () {\n  return [useQuery];\n});\n\n_c = SearchPage;\nexport default SearchPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"sources":["/Users/atian/Desktop/github-search/src/components/SearchPage.js"],"names":["React","useState","gql","useQuery","List","SearchBar","ErrorHandler","GET_LIST","SearchPage","userName","setUserName","data","fetchMore","variables","username","handleSearch","str","updateQuery","prev","fetchMoreResult","handleMore","cursor","user","repositories","pageInfo","endCursor","edges","totalCount","hasNextPage"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAEA,SAASC,GAAT,EAAcC,QAAd,QAA8B,gBAA9B;AAEA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,MAAMC,QAAQ,GAAGL,GAAI;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAtBA;;AAwBA,MAAMM,UAAU,GAAG,MAAM;AAAA;;AACvB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM;AAAEU,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAsBT,QAAQ,CAACI,QAAD,EAAW;AAC7CM,IAAAA,SAAS,EAAE;AAAEC,MAAAA,QAAQ,EAAEL;AAAZ;AADkC,GAAX,CAApC;;AAIA,QAAMM,YAAY,GAAIC,GAAD,IAAS;AAC5BN,IAAAA,WAAW,CAACM,GAAD,CAAX;AACAJ,IAAAA,SAAS,CAAC;AACRC,MAAAA,SAAS,EAAE;AACTC,QAAAA,QAAQ,EAAEE;AADD,OADH;AAIRC,MAAAA,WAAW,EAAE,CAACC,IAAD,EAAO;AAAEC,QAAAA;AAAF,OAAP,KAA+B;AAC1C,YAAI,CAACA,eAAL,EAAsB,OAAOD,IAAP;AACtB,eAAOC,eAAP;AACD;AAPO,KAAD,CAAT;AASD,GAXD;;AAaA,QAAMC,UAAU,GAAG,MAAM;AACvBR,IAAAA,SAAS,CAAC;AACRC,MAAAA,SAAS,EAAE;AACTC,QAAAA,QAAQ,EAAEL,QADD;AAETY,QAAAA,MAAM,EAAEV,IAAI,CAACW,IAAL,CAAUC,YAAV,CAAuBC,QAAvB,CAAgCC;AAF/B,OADH;AAKRR,MAAAA,WAAW,EAAE,CAACC,IAAD,EAAO;AAAEC,QAAAA;AAAF,OAAP,KAA+B;AAC1C,YAAI,CAACA,eAAL,EAAsB,OAAOD,IAAP;AACtB,eAAOC,eAAP;AACD;AARO,KAAD,CAAT;AAUD,GAXD;;AAcA,sBACE;AAAA,4BACE,QAAC,SAAD;AAAW,MAAA,QAAQ,EAAEJ;AAArB;AAAA;AAAA;AAAA;AAAA,YADF,EAEGJ,IAAI,iBACH,QAAC,IAAD;AACE,MAAA,IAAI,EAAEA,IAAI,CAACW,IAAL,CAAUC,YAAV,CAAuBG,KAD/B;AAEE,MAAA,KAAK,EAAEf,IAAI,CAACW,IAAL,CAAUC,YAAV,CAAuBI,UAFhC;AAGE,MAAA,IAAI,EAAElB,QAHR;AAIE,MAAA,IAAI,EAAEW,UAJR;AAKE,MAAA,WAAW,EAAET,IAAI,CAACW,IAAL,CAAUC,YAAV,CAAuBC,QAAvB,CAAgCI;AAL/C;AAAA;AAAA;AAAA;AAAA,YAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAcD,CA/CD;;GAAMpB,U;UAEwBL,Q;;;KAFxBK,U;AAiDN,eAAeA,UAAf","sourcesContent":["import React, { useState } from \"react\";\n\nimport { gql, useQuery } from \"@apollo/client\";\n\nimport List from \"./List\";\nimport SearchBar from \"./SearchBar\";\nimport ErrorHandler from \"./ErrorHandler\";\n\nconst GET_LIST = gql`\n  query($username: String! $cursor: String ) {\n    user( login: $username) {\n      repositories(first: 10, after: $cursor) {\n        totalCount\n        edges{\n          node {\n            ... on Repository {\n              name\n              url\n              description\n              updatedAt\n            }\n          }  \n        }\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n      }\n    }\n  }\n`;\n\nconst SearchPage = () => {\n  const [userName, setUserName] = useState(\"\");\n  const { data, fetchMore } = useQuery(GET_LIST, {\n    variables: { username: userName },\n  });\n\n  const handleSearch = (str) => {\n    setUserName(str);\n    fetchMore({\n      variables: {\n        username: str,\n      },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        if (!fetchMoreResult) return prev;\n        return fetchMoreResult;\n      },\n    });\n  };\n\n  const handleMore = () => {\n    fetchMore({\n      variables: {\n        username: userName,\n        cursor: data.user.repositories.pageInfo.endCursor,\n      },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        if (!fetchMoreResult) return prev;\n        return fetchMoreResult;\n      },\n    });\n  };\n\n\n  return (\n    <div>\n      <SearchBar onSearch={handleSearch} />\n      {data  && \n        <List\n          data={data.user.repositories.edges}\n          total={data.user.repositories.totalCount}\n          user={userName}\n          more={handleMore}\n          hasNextPage={data.user.repositories.pageInfo.hasNextPage}\n        />\n      }\n    </div>\n  );\n};\n\nexport default SearchPage;\n"]},"metadata":{},"sourceType":"module"}