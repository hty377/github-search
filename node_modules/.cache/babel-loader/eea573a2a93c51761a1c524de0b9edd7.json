{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/atian/Desktop/github-search/src/components/SearchPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { gql, useQuery } from \"@apollo/client\";\nimport List from \"./List\";\nimport SearchBar from \"./SearchBar\";\nimport ErrorHandler from \"./ErrorHandler\";\nconst GET_LIST = gql`\n  query($username: String! $cursor: String ) {\n    user( login: $username) {\n      repositories(first: 10, after: $cursor) {\n        totalCount\n        edges{\n          node {\n            ... on Repository {\n              name\n              url\n              description\n              updatedAt\n            }\n          }  \n        }\n        pageInfo {\n          startCursor\n          hasNextPage\n          hasPrePage\n          endCursor\n        }\n      }\n    }\n  }\n`;\n\nconst SearchPage = () => {\n  _s();\n\n  const [userName, setUserName] = useState(\"\");\n  const {\n    loading,\n    error,\n    data,\n    fetchNext,\n    fetchPre\n  } = useQuery(GET_LIST, {\n    variables: {\n      username: userName\n    }\n  });\n\n  const handleSearch = str => {\n    setUserName(str);\n    fetchMore({\n      variables: {\n        username: str\n      },\n      updateQuery: (prev, {\n        fetchMoreResult\n      }) => {\n        if (!fetchMoreResult) return prev;\n        return fetchMoreResult;\n      }\n    });\n  };\n\n  const handleNext = () => {\n    fetchMore({\n      variables: {\n        username: userName,\n        cursor: data.user.repositories.pageInfo.endCursor\n      },\n      updateQuery: (prev, {\n        fetchMoreResult\n      }) => {\n        if (!fetchMoreResult) return prev;\n        return Object.assign({}, prev, { ...fetchMoreResult,\n          user: { ...fetchMoreResult.user,\n            edges: [...prev.user.repositories.edges, ...fetchMoreResult.user.repositories.edges]\n          }\n        });\n      }\n    });\n  };\n\n  const handlePre = () => {\n    fetchMore({\n      variables: {\n        username: userName,\n        cursor: data.user.repositories.pageInfo.startCursor\n      },\n      updateQuery: (prev, {\n        fetchMoreResult\n      }) => {\n        if (!fetchMoreResult) return prev;\n        return Object.assign({}, prev, { ...fetchMoreResult,\n          user: { ...fetchMoreResult.user,\n            edges: [...prev.user.repositories.edges, ...fetchMoreResult.user.repositories.edges]\n          }\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [error && /*#__PURE__*/_jsxDEV(ErrorHandler, {\n      error: error.networkError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }, this), !loading && /*#__PURE__*/_jsxDEV(SearchBar, {\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 20\n    }, this), data && /*#__PURE__*/_jsxDEV(List, {\n      data: data.user.repositories.edges,\n      total: data.user.repositories.totalCount,\n      user: userName,\n      nextPage: handleNext,\n      prePage: handlePre,\n      hasNextPage: data.user.repositories.pageInfo.hasNextPage,\n      hasPrePage: data.user.repositories.pageInfo.hasPrePage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SearchPage, \"59tGLT9B5bRYZHhzIYcvpjfQJgk=\", false, function () {\n  return [useQuery];\n});\n\n_c = SearchPage;\nexport default SearchPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"sources":["/Users/atian/Desktop/github-search/src/components/SearchPage.js"],"names":["React","useState","gql","useQuery","List","SearchBar","ErrorHandler","GET_LIST","SearchPage","userName","setUserName","loading","error","data","fetchNext","fetchPre","variables","username","handleSearch","str","fetchMore","updateQuery","prev","fetchMoreResult","handleNext","cursor","user","repositories","pageInfo","endCursor","Object","assign","edges","handlePre","startCursor","networkError","totalCount","hasNextPage","hasPrePage"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\n\nimport { gql, useQuery } from \"@apollo/client\";\n\nimport List from \"./List\";\nimport SearchBar from \"./SearchBar\";\nimport ErrorHandler from \"./ErrorHandler\";\n\nconst GET_LIST = gql`\n  query($username: String! $cursor: String ) {\n    user( login: $username) {\n      repositories(first: 10, after: $cursor) {\n        totalCount\n        edges{\n          node {\n            ... on Repository {\n              name\n              url\n              description\n              updatedAt\n            }\n          }  \n        }\n        pageInfo {\n          startCursor\n          hasNextPage\n          hasPrePage\n          endCursor\n        }\n      }\n    }\n  }\n`;\n\nconst SearchPage = () => {\n  const [userName, setUserName] = useState(\"\");\n  const { loading, error, data, fetchNext, fetchPre } = useQuery(GET_LIST, {\n    variables: { username: userName },\n  });\n\n  const handleSearch = (str) => {\n    setUserName(str);\n    fetchMore({\n      variables: {\n        username: str,\n      },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        if (!fetchMoreResult) return prev;\n        return fetchMoreResult;\n      },\n    });\n  };\n\n  const handleNext = () => {\n    fetchMore({\n      variables: {\n        username: userName,\n        cursor: data.user.repositories.pageInfo.endCursor,\n      },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        if (!fetchMoreResult) return prev;\n        return Object.assign({}, prev, {\n          ...fetchMoreResult,\n          user: {\n            ...fetchMoreResult.user,\n            edges: [...prev.user.repositories.edges, ...fetchMoreResult.user.repositories.edges],\n          },\n        });\n      },\n    });\n  };\n\n  const handlePre = () => {\n    fetchMore({\n        variables: {\n        username: userName,\n        cursor: data.user.repositories.pageInfo.startCursor,\n      },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        if (!fetchMoreResult) return prev;\n        return Object.assign({}, prev, {\n          ...fetchMoreResult,\n          user: {\n            ...fetchMoreResult.user,\n            edges: [...prev.user.repositories.edges, ...fetchMoreResult.user.repositories.edges],\n          },\n        });\n      },\n    });\n  };\n\n  return (\n    <div>\n      {error && <ErrorHandler error = {error.networkError}/> }\n      {!loading && <SearchBar onSearch={handleSearch} />}\n      {data  && \n        <List\n          data={data.user.repositories.edges}\n          total={data.user.repositories.totalCount}\n          user={userName}\n          nextPage={handleNext}\n          prePage ={handlePre}\n          hasNextPage={data.user.repositories.pageInfo.hasNextPage}\n          hasPrePage={data.user.repositories.pageInfo.hasPrePage}\n        />\n      }\n    </div>\n  );\n};\n\nexport default SearchPage;\n"]},"metadata":{},"sourceType":"module"}